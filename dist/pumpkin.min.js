var asyncGenerator=function(){function a(a){this.value=a}function b(b){function c(a,b){return new Promise(function(c,e){var h={key:a,arg:b,resolve:c,reject:e,next:null};g?g=g.next=h:(f=g=h,d(a,b))})}function d(c,f){try{var g=b[c](f),h=g.value;h instanceof a?Promise.resolve(h.value).then(function(a){d("next",a)},function(a){d("throw",a)}):e(g.done?"return":"normal",g.value)}catch(a){e("throw",a)}}function e(a,b){switch(a){case"return":f.resolve({value:b,done:!0});break;case"throw":f.reject(b);break;default:f.resolve({value:b,done:!1})}f=f.next,f?d(f.key,f.arg):g=null}var f,g;this._invoke=c,"function"!=typeof b.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(b.prototype[Symbol.asyncIterator]=function(){return this}),b.prototype.next=function(a){return this._invoke("next",a)},b.prototype.throw=function(a){return this._invoke("throw",a)},b.prototype.return=function(a){return this._invoke("return",a)},{wrap:function(a){return function(){return new b(a.apply(this,arguments))}},await:function(b){return new a(b)}}}(),classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},set=function a(b,c,d,e){var f=Object.getOwnPropertyDescriptor(b,c);if(void 0===f){var g=Object.getPrototypeOf(b);null!==g&&a(g,c,d,e)}else if("value"in f&&f.writable)f.value=d;else{var h=f.set;void 0!==h&&h.call(e,d)}return d},PumpkinEvent=function(){function a(){classCallCheck(this,a),this.callbacks=[]}return createClass(a,[{key:"add",value:function(a){var b=this.callbacks.push(a)-1;return b}},{key:"squash",value:function(a){delete this.callbacks[a]}}]),a}(),Pumpkin=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"PumpkinPatch";classCallCheck(this,a),this.setupProperties(b)}return createClass(a,[{key:"setupProperties",value:function(a){var b=void 0;b="undefined"!=typeof window?window:global,this.patch=b,"undefined"==typeof this.patch[a]&&(this.patch[a]={}),this.vine=this.patch[a]}},{key:"getEvent",value:function(a){var b=this.vine[a];return"undefined"!=typeof b?b:null}},{key:"getOrCreateEvent",value:function(a){var b=this.getEvent(a);return null===b&&(b=this.vine[a]=new PumpkinEvent),b}},{key:"signal",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=this.getEvent(a);null!==c&&c.hasOwnProperty("callbacks")&&this.makePie(c.callbacks,b)}},{key:"slot",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.patch,d=this.getOrCreateEvent(a);if(a&&"function"==typeof b){var e=d.add({crust:c,recipe:b});return e}return null}},{key:"makePie",value:function(a,b){a.forEach(function(a){"function"==typeof a.recipe&&a.recipe.call(a.crust,b)})}},{key:"squash",value:function(a){a&&null!==this.getEvent(a)&&delete this.vine[a]}}]),a}();